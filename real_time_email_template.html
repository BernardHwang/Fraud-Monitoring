<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Transaction Alert</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    /* Adjust font size for small screens (phones) */
    @media (max-width: 600px) {
      .reference-table th, .reference-table td {
        font-size: 5px;
      }
    }
  </style>
</head>
<body style="font-family: 'Inter', sans-serif; line-height: 1.6; background-color: #ecf0f1; color: #2c3e50; margin: 0 auto; padding: 20px; max-width: 100%; width: 100%;">
  <div class="header" style="background-color: #2c3e50; color: #ffffff; padding: 20px; text-align: center; border-radius: 8px 8px 0 0; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
    <h1>Transaction Monitoring Report</h1>
  </div>

  <div class="content" style="background-color: #ffffff; border-radius: 8px; padding: 30px; box-shadow: 0 8px 20px rgba(0,0,0,0.2), 0 6px 10px rgba(0,0,0,0.1);">
    <p>Dear all,</p>

    <p><strong>{{ message_sender }}</strong> has violated <strong>criteria {{ criteria_num }}</strong> @ {{ datetime }}</p>

    <h2 class="section-title" style="color: #009015; border-bottom: 3px solid #009015; padding-bottom: 10px; margin-bottom: 20px; font-weight: 600;">Recent Transactions</h2>
    <table class="transaction-table" style="width: 100%; border-collapse: collapse; margin-bottom: 20px; table-layout: auto;">
      <thead style="background-color: #2c3e50; color: #ffffff;">
        <tr>
          <th style="padding: 12px; text-align: left; border: 1px solid #ecf0f1;">Time</th>
          <th style="padding: 12px; text-align: left; border: 1px solid #ecf0f1;">Sender Acc Name</th>
          <th style="padding: 12px; text-align: left; border: 1px solid #ecf0f1;">Sender Acc No</th>
          <th style="padding: 12px; text-align: left; border: 1px solid #ecf0f1;">Beneficiary Acc Name</th>
          <th style="padding: 12px; text-align: left; border: 1px solid #ecf0f1;">Payment Type</th>
          <th style="padding: 12px; text-align: left; border: 1px solid #ecf0f1;">Transfer Amount</th>
        </tr>
      </thead>
      <tbody>
        {% for transaction in transactions %}
        <tr style="background-color:#f8f9fa;">
          <td style="padding: 12px; text-align: left; border: 1px solid #ecf0f1;">{{ transaction.time }}</td>
          <td style="padding: 12px; text-align: left; border: 1px solid #ecf0f1;">{{ transaction.sender_acc_name }}</td>
          <td style="padding: 12px; text-align: left; border: 1px solid #ecf0f1;">{{ transaction.sender_acc_no }}</td>
          <td style="padding: 12px; text-align: left; border: 1px solid #ecf0f1;">{{ transaction.beneficiary_acc_name }}</td>
          <td style="padding: 12px; text-align: left; border: 1px solid #ecf0f1;">{{ transaction.payment_type }}</td>
          <td style="padding: 12px; text-align: left; border: 1px solid #ecf0f1;">{{ transaction.transfer_amount }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    <h2 class="section-title" style="color: #009015; border-bottom: 3px solid #009015; padding-bottom: 10px; margin-bottom: 20px; font-weight: 600;">Reference</h2>
    <table class="reference-table" style="width: 100%; border-collapse: collapse; font-size: 0.9em; table-layout: auto;">
      <thead style="background-color: #34495e; color: #ffffff;">
        <tr>
          <th style="padding: 8px; text-align: left; border: 1px solid #ecf0f1;">Criteria</th>
          <th style="padding: 8px; text-align: left; border: 1px solid #ecf0f1;">Criteria Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td style="padding: 8px; text-align: left; border: 1px solid #ecf0f1;">001</td>
          <td style="padding: 8px; text-align: left; border: 1px solid #ecf0f1;">Trxn amount &gt;= RM 100K</td>
        </tr>
        <tr>
          <td style="padding: 8px; text-align: left; border: 1px solid #ecf0f1;">002</td>
          <td style="padding: 8px; text-align: left; border: 1px solid #ecf0f1;">Trxn frequency &gt;= 3 AND Same Beneficiary Acc AND Same day</td>
        </tr>
        <tr>
          <td style="padding: 8px; text-align: left; border: 1px solid #ecf0f1;">003</td>
          <td style="padding: 8px; text-align: left; border: 1px solid #ecf0f1;">Trxn amount &lt;= RM 1K AND Trxn frequency &gt;= 10 AND Same day</td>
        </tr>
        <tr>
          <td style="padding: 8px; text-align: left; border: 1px solid #ecf0f1;">004</td>
          <td style="padding: 8px; text-align: left; border: 1px solid #ecf0f1;">Trxn amount &gt;= RM 1 million</td>
        </tr>
        <tr>
          <td style="padding: 8px; text-align: left; border: 1px solid #ecf0f1;">005</td>
          <td style="padding: 8px; text-align: left; border: 1px solid #ecf0f1;">JomPAY Trxn frequency &gt;= 3 AND Same day</td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="footer" style="background-color: #2c3e50; color: #ffffff; padding: 15px; text-align: center; border-radius: 0 0 8px 8px; margin-top: 20px;">
    <p>Any inquiries please contact <strong>MBSB@coreconsulting.asia</strong></p>
    <p class="footer-generator" style="font-size: 1.2em;">Auto Generated by: <strong>Core Consulting Automation Engine</strong></p>
  </div>
</body>
</html>
